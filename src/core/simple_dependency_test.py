#!/usr/bin/env python3 """ Teste Simplificado do Sistema de Log de Depend√™ncias =================================================== Demonstra√ß√£o b√°sica do sistema de logging com prompt engine. """ import sys
 import os import tempfile
 import time from pathlib import Path # Adicionar caminho do projeto sys.path.insert(0, str(Path(__file__).parent.parent.parent)) print("Œ®QRH Dependency Logger - Teste Simplificado") print("=" * 50) # Criar logger com diret√≥rio tempor√°rio
 from src.core.dependency_logger import DependencyLogger temp_dir = tempfile.mkdtemp() log_dir = os.path.join(temp_dir, "dependency_logs") try: logger = DependencyLogger(log_dir=log_dir) print(f"Logger inicializado - Session: {logger.session_id}") print(f"Logs em: {log_dir}") # Teste 1: Log manual de depend√™ncias conflitantes print("\nTeste 1: Detectando conflitos de vers√£o") print("-" * 30) logger.log_function_dependency("neural_network", { "numpy": "1.26.0", "torch": "2.1.0" }) logger.log_function_dependency("data_processing", { "numpy": "1.24.0", # CONFLITO! "pandas": "2.0.3" }) print("Depend√™ncias registradas") # Teste 2: Imports reais para testar hooks print("\nTeste 2: Testando hooks de
 import") print("-" * 30) logger.set_function_context("test_imports") try: import json
 import time import os print("Imports b√°sicos funcionaram") except Exception as e: print(f"Erro nos
 imports: {e}") # Teste 3: Gerar relat√≥rio print("\nTeste 3: Gerando relat√≥rio de compatibilidade") print("-" * 50) report = logger.generate_compatibility_report() print(report) # Teste 4: Salvar logs print("\nTeste 4: Salvando logs") print("-" * 30) logger.save_log() print("Logs salvos com sucesso") # Teste 5: Dados para cruzamento print("\nüîó Teste 5: Dados de refer√™ncia cruzada") print("-" * 30) cross_data = logger.get_cross_reference_data() print(f"Session ID: {cross_data['session_id']}") print(f"Dependencies: {len(cross_data['dependencies'])}") print(f"Conflicts: {len(cross_data['conflicts'])}") print("\n" + "=" * 50) print("TESTE CONCLU√çDO COM SUCESSO") print("=" * 50) # Mostrar exemplo de uso com prompt engine PROMPT_EXAMPLE = """ EXEMPLO DE USO COM PROMPT ENGINE: Œ®QRH-PROMPT-ENGINE: { "context": "Conflito detectado entre vers√µes de numpy", "analysis": "neural_network requer numpy 1.26.0, data_processing usa 1.24.0", "solution": "Unificar vers√£o para numpy 1.25.0 (compat√≠vel com ambas)", "implementation": [ "pip install numpy==1.25.0", "Testar ambas as fun√ß√µes", "Verificar se n√£o h√° quebras de API" ], "validation": "Executar testes de integra√ß√£o ap√≥s atualiza√ß√£o" } Este sistema permite: Detec√ß√£o autom√°tica de conflitos An√°lise inteligente via IA Hist√≥rico para padr√µes Relat√≥rios detalhados Sugest√µes de resolu√ß√£o """ print(PROMPT_EXAMPLE) print(f"\nLogs dispon√≠veis em: {log_dir}") except Exception as e: print(f"Erro durante teste: {e}") import traceback traceback.print_exc() print(f"\nüßπ Limpeza: {temp_dir}")