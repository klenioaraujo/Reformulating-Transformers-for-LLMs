{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/klenioaraujo/Reformulating-Transformers-for-LLMs/master/schemas/report_schema.json",
  "title": "ΨQRH Validation Report Schema",
  "description": "JSON schema for ΨQRH transformer validation and analysis reports",
  "type": "object",
  "required": ["metadata", "report_type", "timestamp", "version"],

  "properties": {
    "$schema": {
      "type": "string",
      "format": "uri",
      "description": "Reference to this JSON schema"
    },

    "metadata": {
      "type": "object",
      "required": ["project", "version", "doi"],
      "properties": {
        "project": {
          "type": "string",
          "const": "ΨQRH Transformer"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Semantic version (e.g., 1.0.0)"
        },
        "doi": {
          "type": "string",
          "format": "uri",
          "description": "DOI for the project"
        },
        "license": {
          "type": "string",
          "enum": ["GPL-3.0-or-later"]
        }
      }
    },

    "report_type": {
      "type": "string",
      "enum": [
        "energy_conservation",
        "parseval_validation",
        "fractal_analysis",
        "consciousness_metrics",
        "performance_benchmark",
        "integration_test",
        "comprehensive_analysis"
      ],
      "description": "Type of validation report"
    },

    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of report generation"
    },

    "version": {
      "type": "string",
      "description": "Report schema version"
    },

    "provenance": {
      "type": "object",
      "required": ["software_version", "execution_environment"],
      "properties": {
        "software_version": {
          "type": "string",
          "description": "ΨQRH software version"
        },
        "git_commit": {
          "type": "string",
          "pattern": "^[0-9a-f]{7,40}$",
          "description": "Git commit hash"
        },
        "hardware": {
          "type": "object",
          "properties": {
            "cpu": {"type": "string"},
            "gpu": {"type": "string"},
            "ram": {"type": "string"},
            "device": {"type": "string", "enum": ["cpu", "cuda", "mps"]}
          }
        },
        "execution_environment": {
          "type": "object",
          "required": ["python_version", "pytorch_version"],
          "properties": {
            "python_version": {"type": "string"},
            "pytorch_version": {"type": "string"},
            "numpy_version": {"type": "string"},
            "platform": {"type": "string"},
            "os": {"type": "string"}
          }
        },
        "input_data_hash": {
          "type": "string",
          "pattern": "^(sha256|md5):[0-9a-f]+$",
          "description": "Hash of input data for reproducibility"
        },
        "random_seed": {
          "type": "integer",
          "description": "Random seed for reproducibility"
        },
        "execution_time": {
          "type": "number",
          "description": "Execution time in seconds"
        }
      }
    },

    "configuration": {
      "type": "object",
      "description": "Configuration parameters used",
      "properties": {
        "model_params": {
          "type": "object",
          "properties": {
            "d_model": {"type": "integer"},
            "n_heads": {"type": "integer"},
            "n_layers": {"type": "integer"},
            "vocab_size": {"type": "integer"},
            "max_seq_length": {"type": "integer"}
          }
        },
        "training_params": {
          "type": "object",
          "properties": {
            "batch_size": {"type": "integer"},
            "learning_rate": {"type": "number"},
            "epochs": {"type": "integer"},
            "optimizer": {"type": "string"}
          }
        }
      }
    },

    "energy_conservation": {
      "type": "object",
      "description": "Energy conservation analysis results",
      "properties": {
        "overall_conservation": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Overall energy conservation percentage"
        },
        "layer_conservation": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["layer", "conservation"],
            "properties": {
              "layer": {"type": "integer"},
              "conservation": {"type": "number"},
              "input_energy": {"type": "number"},
              "output_energy": {"type": "number"}
            }
          }
        },
        "deviation": {
          "type": "number",
          "description": "Standard deviation of conservation across layers"
        },
        "status": {
          "type": "string",
          "enum": ["PASS", "FAIL", "WARNING"]
        }
      }
    },

    "parseval_validation": {
      "type": "object",
      "description": "Parseval's theorem validation results",
      "properties": {
        "time_domain_energy": {"type": "number"},
        "frequency_domain_energy": {"type": "number"},
        "relative_error": {"type": "number"},
        "threshold": {"type": "number"},
        "status": {
          "type": "string",
          "enum": ["PASS", "FAIL"]
        }
      }
    },

    "fractal_metrics": {
      "type": "object",
      "description": "Fractal consciousness metrics",
      "properties": {
        "fractal_dimension": {
          "type": "number",
          "minimum": 0,
          "maximum": 3
        },
        "consciousness_index": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Fractal Consciousness Index (FCI)"
        },
        "coherence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "complexity": {
          "type": "number",
          "minimum": 0
        },
        "self_similarity": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "ontology_reference": {
          "type": "string",
          "format": "uri",
          "description": "Reference to COGPO ontology term"
        }
      }
    },

    "performance_metrics": {
      "type": "object",
      "description": "Performance benchmarking results",
      "properties": {
        "inference_time": {
          "type": "number",
          "description": "Average inference time in milliseconds"
        },
        "throughput": {
          "type": "number",
          "description": "Tokens per second"
        },
        "memory_usage": {
          "type": "object",
          "properties": {
            "peak_mb": {"type": "number"},
            "average_mb": {"type": "number"}
          }
        },
        "accuracy_metrics": {
          "type": "object",
          "properties": {
            "perplexity": {"type": "number"},
            "bleu_score": {"type": "number"},
            "loss": {"type": "number"}
          }
        }
      }
    },

    "consciousness_states": {
      "type": "object",
      "description": "Neural consciousness state analysis",
      "properties": {
        "dominant_state": {
          "type": "string",
          "enum": ["Delta", "Theta", "Alpha", "Beta", "Gamma"]
        },
        "state_distribution": {
          "type": "object",
          "patternProperties": {
            "^(Delta|Theta|Alpha|Beta|Gamma)$": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            }
          }
        },
        "coherence_matrix": {
          "type": "array",
          "items": {"type": "array", "items": {"type": "number"}}
        }
      }
    },

    "validation_summary": {
      "type": "object",
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["PASS", "FAIL", "PARTIAL"]
        },
        "passed_tests": {"type": "integer"},
        "failed_tests": {"type": "integer"},
        "total_tests": {"type": "integer"},
        "success_rate": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "notes": {
          "type": "array",
          "items": {"type": "string"}
        },
        "warnings": {
          "type": "array",
          "items": {"type": "string"}
        },
        "errors": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },

    "visualizations": {
      "type": "object",
      "description": "References to generated visualization files",
      "properties": {
        "plots": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "title": {"type": "string"},
              "filepath": {"type": "string"},
              "format": {"type": "string", "enum": ["png", "pdf", "svg"]},
              "description": {"type": "string"}
            }
          }
        }
      }
    },

    "references": {
      "type": "object",
      "description": "External references and citations",
      "properties": {
        "papers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "title": {"type": "string"},
              "authors": {"type": "array", "items": {"type": "string"}},
              "doi": {"type": "string"},
              "year": {"type": "integer"}
            }
          }
        },
        "datasets": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "doi": {"type": "string"},
              "url": {"type": "string", "format": "uri"}
            }
          }
        }
      }
    }
  },

  "additionalProperties": true,

  "examples": [
    {
      "$schema": "https://raw.githubusercontent.com/klenioaraujo/Reformulating-Transformers-for-LLMs/master/schemas/report_schema.json",
      "metadata": {
        "project": "ΨQRH Transformer",
        "version": "1.0.0",
        "doi": "https://zenodo.org/records/17171112",
        "license": "GPL-3.0-or-later"
      },
      "report_type": "energy_conservation",
      "timestamp": "2025-09-30T12:00:00Z",
      "version": "1.0",
      "provenance": {
        "software_version": "1.0.0",
        "git_commit": "abc1234",
        "hardware": {
          "device": "cuda",
          "gpu": "NVIDIA RTX 3090"
        },
        "execution_environment": {
          "python_version": "3.10.0",
          "pytorch_version": "2.0.0",
          "platform": "Linux"
        },
        "random_seed": 42
      },
      "energy_conservation": {
        "overall_conservation": 99.8,
        "status": "PASS"
      },
      "validation_summary": {
        "status": "PASS",
        "passed_tests": 10,
        "failed_tests": 0,
        "total_tests": 10,
        "success_rate": 100.0
      }
    }
  ]
}