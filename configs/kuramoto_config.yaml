# Configura√ß√£o do Sistema de Kuramoto com Localiza√ß√£o Espacial de Neur√¥nios Espectrais
# ======================================================================================
#
# Sistema de osciladores acoplados com equa√ß√µes de rea√ß√£o-difus√£o:
#   ‚àÇŒ∏/‚àÇt - ŒîŒ∏ = œâ + g(Œ∏-œÜ)
#   ‚àÇœÜ/‚àÇt - ŒîœÜ = œâ - g(Œ∏-œÜ)
#
# Modelo de Kuramoto estendido:
#   dŒ∏/dt = œâ‚ÇÅ + K¬∑‚àë sin(Œ∏‚±º - Œ∏·µ¢)
#   dœÜ/dt = œâ‚ÇÇ - K¬∑‚àë sin(Œ∏‚±º - Œ∏·µ¢)

kuramoto_spectral_layer:
  # ===== Dimens√µes do Grid Espacial =====
  spatial_grid:
    height: 32              # Altura do grid de neur√¥nios
    width: 32               # Largura do grid de neur√¥nios
    depth: 1                # Profundidade (1=2D, >1=3D)
    topology: 'grid_2d'     # Op√ß√µes: 'grid_2d', 'grid_3d', 'hexagonal', 'random'
    periodic_boundary: true # Condi√ß√µes de contorno peri√≥dicas

  # ===== Par√¢metros do Modelo de Kuramoto =====
  oscillator_dynamics:
    coupling_strength: 1.0           # K - for√ßa de acoplamento entre osciladores
    natural_frequency_mean: 1.0      # œâ - frequ√™ncia natural m√©dia (Hz)
    natural_frequency_std: 0.1       # œÉ_œâ - dispers√£o das frequ√™ncias
    phase_coupling_mode: 'symmetric' # 'symmetric' ou 'asymmetric'

  # ===== Par√¢metros de Difus√£o Espacial =====
  reaction_diffusion:
    diffusion_coefficient: 0.1  # D - coeficiente de difus√£o espacial
    time_step: 0.01             # dt - passo de integra√ß√£o temporal
    num_integration_steps: 10   # N√∫mero de passos de integra√ß√£o por forward pass
    integration_method: 'euler' # 'euler', 'rk4', ou 'adaptive'

  # ===== Sincroniza√ß√£o =====
  synchronization:
    threshold: 0.9                      # Threshold para considerar sincronizado (r > threshold)
    enable_adaptive_coupling: true      # Ajustar K baseado em r
    adaptive_coupling_rate: 0.01        # Taxa de adapta√ß√£o de K
    target_synchronization: 0.85        # Alvo de sincroniza√ß√£o para controle adaptativo

  # ===== Integra√ß√£o com Œ®QRH =====
  qrh_integration:
    embed_dim: 64                  # Dimens√£o base de embedding (ser√° multiplicado por 4)
    quaternion_multiplier: 4       # Multiplicador quaterni√¥nico
    use_residual_connection: true  # Conex√£o residual com input
    residual_weight: 0.1           # Peso da conex√£o residual
    use_layer_norm: true           # Normaliza√ß√£o de camada

  # ===== Conectividade Espacial =====
  connectivity:
    connection_type: 'distance_based'  # 'distance_based', 'k_nearest', ou 'full'
    influence_radius: 4.0              # Raio de influ√™ncia (em c√©lulas do grid)
    decay_function: 'gaussian'         # 'gaussian', 'exponential', ou 'linear'
    sigma_connectivity: null           # œÉ para Gaussiana (None = auto: max(H,W)/4)
    normalize_connections: true        # Normalizar pesos de conex√£o por linha

  # ===== M√©tricas e Monitoramento =====
  monitoring:
    track_synchronization_history: true  # Rastrear hist√≥rico de sincroniza√ß√£o
    history_window: 100                  # Tamanho da janela de hist√≥rico
    compute_spatial_coherence: true      # Computar coer√™ncia espacial
    log_phase_evolution: false           # Log detalhado da evolu√ß√£o de fases

  # ===== Otimiza√ß√µes =====
  performance:
    use_sparse_connectivity: false  # Usar matriz esparsa para conectividade
    enable_caching: true            # Cache de matrizes computadas
    batch_processing: true          # Processar m√∫ltiplos tokens em paralelo
    device: 'cpu'                   # 'cpu', 'cuda', ou 'mps'

  # ===== Inicializa√ß√£o =====
  initialization:
    phase_init_method: 'random'     # 'random', 'uniform', ou 'learned'
    phase_init_scale: 3.14159       # Escala para inicializa√ß√£o (œÄ para [-œÄ, œÄ])
    frequency_init_method: 'normal' # 'normal', 'uniform', ou 'learned'
    seed: null                      # Seed para reprodutibilidade (None = aleat√≥rio)

  # ===== Debug e Valida√ß√£o =====
  debug:
    enable_warnings: true
    validate_energy_conservation: true
    energy_tolerance: 0.1
    check_synchronization: true
    verbose_logging: false

# ===== Configura√ß√µes Espec√≠ficas para Integra√ß√£o no Transformer =====
transformer_integration:
  # Posi√ß√£o no transformer
  layer_position: 'after_attention'  # 'after_attention', 'before_ffn', ou 'replace_ffn'

  # Uso em conjunto com outras camadas
  use_with_qrh_layer: true           # Usar em paralelo com QRHLayer
  use_with_cognitive_filters: true   # Usar ap√≥s filtros cognitivos

  # Controle de ativa√ß√£o
  activation_schedule:
    warmup_steps: 1000               # Passos de warmup antes de ativar
    activation_probability: 1.0      # Probabilidade de ativar a camada (para dropout)
    adaptive_activation: false       # Ativar baseado em m√©tricas de sincroniza√ß√£o

# ===== Configura√ß√µes Avan√ßadas =====
advanced:
  # Kuramoto de ordem superior
  higher_order_interactions: false   # Habilitar intera√ß√µes de ordem superior
  interaction_order: 2               # Ordem das intera√ß√µes (padr√£o: 2)

  # Ru√≠do e perturba√ß√µes
  add_noise: false                   # Adicionar ru√≠do √†s fases
  noise_amplitude: 0.01              # Amplitude do ru√≠do

  # Mem√≥ria de estados
  enable_phase_memory: true          # Manter mem√≥ria de estados de fase
  memory_decay: 0.95                 # Fator de decaimento da mem√≥ria

  # An√°lise espectral
  compute_fft_spectrum: false        # Computar espectro FFT das fases
  spectrum_frequency_bins: 64        # N√∫mero de bins de frequ√™ncia

# ======================================================================
# üî¨ INSTRU√á√ïES DE VALIDA√á√ÉO DO N√öCLEO
# ======================================================================
# Para garantir que qualquer altera√ß√£o nesta configura√ß√£o n√£o quebre as
# propriedades matem√°ticas fundamentais do sistema Œ®QRH (como a
# conserva√ß√£o de energia), execute o teste de valida√ß√£o do n√∫cleo.
#
# Este teste verifica:
#   1. Conserva√ß√£o de Energia
#   2. Teorema de Parseval (Corretude da FFT)
#   3. Efici√™ncia de Mem√≥ria e Par√¢metros
#   4. Propriedades do Quaternion Rotacional
#
# COMO EXECUTAR:
# No diret√≥rio raiz do projeto, execute o seguinte comando:
#
# make validate-core
#
# Se o teste falhar, revise suas configura√ß√µes ou o c√≥digo modificado.
# A normaliza√ß√£o de energia agora √© obrigat√≥ria para garantir a
# estabilidade do sistema.
# ======================================================================
