# Cognitive Filters Configuration
# ================================
# Configura√ß√µes para filtros sem√¢nticos adaptativos do sistema Œ®QRH
#
# Este arquivo configura os tr√™s filtros cognitivos principais:
# 1. ContradictionDetector - Detec√ß√£o de contradi√ß√µes sem√¢nticas
# 2. IrrelevanceFilter - Filtragem de irrelev√¢ncias
# 3. BiasFilter - Corre√ß√£o de vieses cognitivos
#
# Copyright (C) 2025 Klenio Araujo Padilha
# Licensed under GNU GPLv3

# ========================================
# Semantic Filter Configuration
# ========================================

semantic_filter:
  # Dimens√µes base
  embed_dim: 64  # Dimens√£o base do embedding (ser√° multiplicado por 4 para quaternions)
  num_heads: 8   # N√∫mero de cabe√ßas de aten√ß√£o para detec√ß√£o de contradi√ß√£o

  # Learning parameters
  learning_rate: 1.0e-4  # Taxa de aprendizado para filtros adaptativos
  temperature: 0.5       # Temperatura para decis√µes sharper (menor = mais determin√≠stico)
  epsilon: 1.0e-8        # Epsilon para estabilidade num√©rica

# ========================================
# Contradiction Detector Configuration
# ========================================

contradiction_detector:
  # Threshold de detec√ß√£o
  contradiction_threshold: 0.3  # Limiar para considerar contradi√ß√£o (0-1)

  # Sensitivity parameters
  contradiction_sensitivity: 2.0  # Fator de amplifica√ß√£o para detec√ß√£o (maior = mais sens√≠vel)
  phase_rotation_strength: 0.5    # For√ßa da rota√ß√£o de fase para atenua√ß√£o (0-1)

  # Multi-head attention settings
  attention_dropout: 0.1  # Dropout nas cabe√ßas de aten√ß√£o

  # Quaternion filter parameters
  phase_filter_init_scale: 0.1  # Escala inicial do filtro de contradi√ß√£o de fase

  # Enhancement features
  enable_multi_scale_analysis: true      # An√°lise multi-escala de aten√ß√£o
  enable_statistical_anomalies: true     # Detec√ß√£o de anomalias estat√≠sticas
  enable_adaptive_thresholding: true     # Thresholding adaptativo baseado em contexto

  # Preservation factor (quanto do original preservar ap√≥s filtragem)
  preservation_factor_base: 1.0  # Fator base de preserva√ß√£o (ajustado dinamicamente)

# ========================================
# Irrelevance Filter Configuration
# ========================================

irrelevance_filter:
  # Threshold de relev√¢ncia
  irrelevance_threshold: 0.4  # Limiar para considerar irrelevante (0-1)

  # Topic extraction
  topic_query_init_scale: 1.0  # Escala inicial da query de t√≥pico principal

  # Relevance scoring
  relevance_encoder_hidden_ratio: 2  # Raz√£o de redu√ß√£o na dimens√£o oculta (embed_dim / ratio)

  # Spectral filtering
  spectral_filter_init_value: 0.5  # Valor inicial do filtro espectral
  enable_fft_filtering: true       # Habilitar filtragem FFT para irrelev√¢ncias

  # Topic consistency
  topic_consistency_weight: 0.7  # Peso para consist√™ncia com t√≥pico principal

# ========================================
# Bias Filter Configuration
# ========================================

bias_filter:
  # Threshold de vi√©s
  bias_threshold: 0.6  # Limiar para considerar vi√©s significativo (0-1)

  # Bias pattern recognition
  num_bias_patterns: 10  # N√∫mero de padr√µes de vi√©s a detectar
  bias_detector_layers: [1.0, 0.5]  # Raz√µes de redu√ß√£o nas camadas do detector

  # Quaternion correction
  correction_quaternion_init_scale: 0.1  # Escala inicial dos quaternions de corre√ß√£o

  # Adaptive threshold
  enable_adaptive_bias_threshold: true  # Threshold adaptativo para vi√©s

  # Bias types to monitor (optional - can be expanded)
  monitored_bias_types:
    - confirmation_bias
    - anchoring_bias
    - availability_bias
    - negativity_bias
    - optimism_bias
    - dunning_kruger
    - fundamental_attribution
    - in_group_bias
    - out_group_homogeneity
    - recency_bias

# ========================================
# Filter Coordination
# ========================================

filter_coordination:
  # Mixing strategy
  enable_adaptive_mixing: true  # Mixing adaptativo dos 3 filtros
  initial_mixing_weights: [0.333, 0.333, 0.334]  # Pesos iniciais [contradiction, irrelevance, bias]

  # Residual connection
  residual_weight: 0.1  # Peso da conex√£o residual com input original

  # Coordination network
  coordinator_hidden_ratio: 2  # Raz√£o de redu√ß√£o na rede de coordena√ß√£o

# ========================================
# Semantic Health Monitoring
# ========================================

semantic_health:
  # Enable health reporting
  enable_health_reports: true

  # Health thresholds
  healthy_contradiction_max: 0.3  # Contradi√ß√£o saud√°vel m√°xima
  healthy_relevance_min: 0.6      # Relev√¢ncia saud√°vel m√≠nima
  healthy_bias_max: 0.4           # Vi√©s saud√°vel m√°ximo

  # Overall health calculation
  health_weights:
    contradiction: 0.4
    relevance: 0.3
    bias: 0.3

# ========================================
# Performance Optimization
# ========================================

performance:
  # Batch processing
  enable_batch_optimization: true
  max_batch_size: 32

  # Caching
  enable_filter_caching: false  # Cache de resultados de filtros (use com cuidado)
  cache_max_size: 100

  # Precision
  use_mixed_precision: false  # Usar mixed precision (bfloat16/float32)

# ========================================
# Debug and Logging
# ========================================

debug:
  log_filter_metrics: false        # Logar m√©tricas detalhadas dos filtros
  log_attention_weights: false     # Logar pesos de aten√ß√£o
  log_contradiction_scores: false  # Logar scores de contradi√ß√£o
  log_relevance_scores: false      # Logar scores de relev√¢ncia
  log_bias_scores: false           # Logar scores de vi√©s
  verbose_health_reports: false    # Relat√≥rios de sa√∫de verbosos

  # Save intermediate results
  save_intermediate_states: false
  intermediate_output_dir: "tmp/cognitive_debug"

# ========================================
# Integration Settings
# ========================================

integration:
  # Pipeline position
  apply_after_qrh: true      # Aplicar filtros cognitivos ap√≥s QRHLayer
  apply_before_output: true  # Aplicar antes da camada de sa√≠da final

  # Input/output format
  expect_quaternion_input: true  # Espera entrada no formato quaterni√¥nico [B, T, 4*D]

  # Compatibility
  auto_adapt_dimensions: true  # Adaptar dimens√µes automaticamente se necess√°rio

# ======================================================================
# üî¨ INSTRU√á√ïES DE VALIDA√á√ÉO DO N√öCLEO
# ======================================================================
# Para garantir que qualquer altera√ß√£o nesta configura√ß√£o n√£o quebre as
# propriedades matem√°ticas fundamentais do sistema Œ®QRH (como a
# conserva√ß√£o de energia), execute o teste de valida√ß√£o do n√∫cleo.
#
# Este teste verifica:
#   1. Conserva√ß√£o de Energia
#   2. Teorema de Parseval (Corretude da FFT)
#   3. Efici√™ncia de Mem√≥ria e Par√¢metros
#   4. Propriedades do Quaternion Rotacional
#
# COMO EXECUTAR:
# No diret√≥rio raiz do projeto, execute o seguinte comando:
#
# make validate-core
#
# Se o teste falhar, revise suas configura√ß√µes ou o c√≥digo modificado.
# A normaliza√ß√£o de energia agora √© obrigat√≥ria para garantir a
# estabilidade do sistema.
# ======================================================================